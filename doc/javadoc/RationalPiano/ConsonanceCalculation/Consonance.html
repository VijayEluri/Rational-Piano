<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_23) on Sat Jan 15 16:53:35 CET 2011 -->
<TITLE>
Consonance
</TITLE>

<META NAME="date" CONTENT="2011-01-15">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Consonance";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Consonance.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../RationalPiano/ConsonanceCalculation/IConsonance.html" title="interface in RationalPiano.ConsonanceCalculation"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?RationalPiano/ConsonanceCalculation/Consonance.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Consonance.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
RationalPiano.ConsonanceCalculation</FONT>
<BR>
Class Consonance</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>RationalPiano.ConsonanceCalculation.Consonance</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../RationalPiano/ConsonanceCalculation/IConsonance.html" title="interface in RationalPiano.ConsonanceCalculation">IConsonance</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>Consonance</B><DT>extends java.lang.Object<DT>implements <A HREF="../../RationalPiano/ConsonanceCalculation/IConsonance.html" title="interface in RationalPiano.ConsonanceCalculation">IConsonance</A></DL>
</PRE>

<P>
Calculates the consonances for a range of notes (on the 12TET scale) given a set of active notes with different volumes.
 At initialization time calculates the dissonance of all intervals in the parametrized range with the given maximum dissonance and bell width.
 It is based on rational numbers and the assumption that the perceived dissonance between the rational number 1/1 (unison) and another n/d is n*d.
 Dissonance = 1 / Consonance.
 Each rational number denotes a point (x=numerator/denominator, y=numerator*denominator) on the relative frequency / dissonance plane.
 Each rational number gets "fuzzified" by a bell curve as human can't distinguish close frequencies and all real numbers on the x-axis have to get filled which is impossible with rational numbers.
 Also note that the human auditory system works log scaled, so the difference between two halftones is a FACTOR (multiplication wise) of 2^(1/12) in the 12TET scale (logarithmic equal steps).
 So the bell curve is logarithmized in a way that it's looking normal on a log plot.
 It is not based on the specific timbre played like in the works of Sethares.
<P>

<P>
<DL>
<DT><B>Version:</B></DT>
  <DD>1.01</DD>
<DT><B>Author:</B></DT>
  <DD>Fabian Ehrentraud</DD>
<DT><B>Licence:</B></DT>
  <DD>Licensed under the Open Software License (OSL 3.0)</DD>
<DT><B>Date:</B></DT>
  <DD>2010-07-30</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#bellWidth">bellWidth</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.util.logging.Logger</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#logger">logger</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#maxfrac">maxfrac</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#notecount">notecount</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.ArrayList&lt;java.lang.Double&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#noteDiss">noteDiss</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#notestart">notestart</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.HashMap&lt;java.lang.Integer,java.lang.Double&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#voiceConsonances">voiceConsonances</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#Consonance(int, int, int, double)">Consonance</A></B>(int&nbsp;notestart,
           int&nbsp;notecount,
           int&nbsp;maxfrac,
           double&nbsp;bellWidth)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.ArrayList&lt;java.util.ArrayList&lt;java.lang.Integer&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#calcAllCombinedFactorizations(int)">calcAllCombinedFactorizations</A></B>(int&nbsp;upto)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates all factorizations from 1 to upto.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.ArrayList&lt;<A HREF="../../RationalPiano/ConsonanceCalculation/Rational.html" title="class in RationalPiano.ConsonanceCalculation">Rational</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#calcAllSublists(java.util.ArrayList)">calcAllSublists</A></B>(java.util.ArrayList&lt;java.util.ArrayList&lt;java.lang.Integer&gt;&gt;&nbsp;factorlist)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates all sublists for all factor lists respectively.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.ArrayList&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#calcCombinedFactorization(int, java.util.ArrayList)">calcCombinedFactorization</A></B>(int&nbsp;num,
                          java.util.ArrayList&lt;java.lang.Integer&gt;&nbsp;primes)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates the factorization for the given integer number.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.ArrayList&lt;java.lang.Double&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#calcNoteDiss(java.util.ArrayList, double, int)">calcNoteDiss</A></B>(java.util.ArrayList&lt;<A HREF="../../RationalPiano/ConsonanceCalculation/Rational.html" title="class in RationalPiano.ConsonanceCalculation">Rational</A>&gt;&nbsp;rationals,
             double&nbsp;bellWidth,
             int&nbsp;notecount)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For each note in the noterange, calculate the minimum dissonance value which results of bellcurves centered about all the fraction values respectively multiplied with the individual dissonances (numerator * denominator).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.ArrayList&lt;java.lang.Integer&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#calcPrimes(int)">calcPrimes</A></B>(int&nbsp;upto)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates all primes from 2 to upto.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.util.ArrayList&lt;<A HREF="../../RationalPiano/ConsonanceCalculation/Rational.html" title="class in RationalPiano.ConsonanceCalculation">Rational</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#calcSublists(java.util.ArrayList)">calcSublists</A></B>(java.util.ArrayList&lt;java.lang.Integer&gt;&nbsp;intlist)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates from a given list of integers all possibilities of putting them on the left or right side of a fraction bar.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.HashMap&lt;java.lang.Integer,java.lang.Double&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#calculate(java.util.HashMap)">calculate</A></B>(java.util.HashMap&lt;java.lang.Integer,java.lang.Double&gt;&nbsp;voicesValues)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets the dissonances for all notes in range [notestart, notestart+notecount-1] for the given set of sounding notes with their according volumes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../RationalPiano/ConsonanceCalculation/Consonance.html#initialize(int, int, double)">initialize</A></B>(int&nbsp;notecount,
           int&nbsp;maxfrac,
           double&nbsp;bellWidth)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculates the dissonance of all intervals in the parametrized range with the given maximum dissonance and bell width.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="notestart"><!-- --></A><H3>
notestart</H3>
<PRE>
private int <B>notestart</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="notecount"><!-- --></A><H3>
notecount</H3>
<PRE>
private int <B>notecount</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="maxfrac"><!-- --></A><H3>
maxfrac</H3>
<PRE>
private int <B>maxfrac</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="bellWidth"><!-- --></A><H3>
bellWidth</H3>
<PRE>
private double <B>bellWidth</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="noteDiss"><!-- --></A><H3>
noteDiss</H3>
<PRE>
private java.util.ArrayList&lt;java.lang.Double&gt; <B>noteDiss</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="voiceConsonances"><!-- --></A><H3>
voiceConsonances</H3>
<PRE>
private java.util.HashMap&lt;java.lang.Integer,java.lang.Double&gt; <B>voiceConsonances</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="logger"><!-- --></A><H3>
logger</H3>
<PRE>
private static final java.util.logging.Logger <B>logger</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="Consonance(int, int, int, double)"><!-- --></A><H3>
Consonance</H3>
<PRE>
public <B>Consonance</B>(int&nbsp;notestart,
                  int&nbsp;notecount,
                  int&nbsp;maxfrac,
                  double&nbsp;bellWidth)</PRE>
<DL>
<DL>
<DT><B>Parameters:</B><DD><CODE>notestart</CODE> - Midi note number of the first note in range.<DD><CODE>notecount</CODE> - Count of halftones above (and inclusively) notestart to include.<DD><CODE>maxfrac</CODE> - The maximum dissonance value for rational numbers (numerator * denominator) to take account for. 157 is a good value. High values will cause longer initialization times!<DD><CODE>bellWidth</CODE> - The width of the bell shaped curve with which each fraction's point get's "fuzzified". bellWidth==1 means it's inflection point is at +- 1/Sqrt(e) semitones. bellWidth>0</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="calculate(java.util.HashMap)"><!-- --></A><H3>
calculate</H3>
<PRE>
public java.util.HashMap&lt;java.lang.Integer,java.lang.Double&gt; <B>calculate</B>(java.util.HashMap&lt;java.lang.Integer,java.lang.Double&gt;&nbsp;voicesValues)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../RationalPiano/ConsonanceCalculation/IConsonance.html#calculate(java.util.HashMap)">IConsonance</A></CODE></B></DD>
<DD>Gets the dissonances for all notes in range [notestart, notestart+notecount-1] for the given set of sounding notes with their according volumes.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../RationalPiano/ConsonanceCalculation/IConsonance.html#calculate(java.util.HashMap)">calculate</A></CODE> in interface <CODE><A HREF="../../RationalPiano/ConsonanceCalculation/IConsonance.html" title="interface in RationalPiano.ConsonanceCalculation">IConsonance</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>voicesValues</CODE> - A map with the sounding notes; the Integer key value denotes the midi note number and the Double value denotes the according volume; all notes not in the map are assumed to have volume 0.
<DT><B>Returns:</B><DD>A map with consonance values between 0 and 1 for all notes in range [notestart, notestart+notecount-1].</DL>
</DD>
</DL>
<HR>

<A NAME="initialize(int, int, double)"><!-- --></A><H3>
initialize</H3>
<PRE>
private void <B>initialize</B>(int&nbsp;notecount,
                        int&nbsp;maxfrac,
                        double&nbsp;bellWidth)</PRE>
<DL>
<DD>Calculates the dissonance of all intervals in the parametrized range with the given maximum dissonance and bell width.
 At first calculates the factorization of all integers i=1...maxfrac where for each single factorization, same primes get multiplied back together (eg. from factorization of 300 = {2,2,3,5,5} result is {4,3,25}).
 For each factorization list generates a set of rational numbers where all possibilities of distributing those factors on each side of the fraction mark ({}->{1}). (eg. {4,3,25} -> {(1)/(4*3*25),(1*4)/(3*25),(1*3)/(4*25),(1*25)/(4*3),(4*3)/(25),(4*25)/(3),(3*25)/(4),(4*3*25)/(1}}})
 For each note in the noterange, calculate the minimum dissonance value which results of bellcurves centered about all the fraction values respectively multiplied with the individual dissonances (numerator * denominator).
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>notecount</CODE> - Count of halftones above prime (1/1) to include.<DD><CODE>maxfrac</CODE> - The maximum dissonance value for rational numbers (numerator * denominator) to take account for. 157 is a good value. High values will cause longer initialization times!<DD><CODE>bellWidth</CODE> - The width of the bell shaped curve with which each fraction's point get's "fuzzified". bellWidth==1 means it's inflection point is at +- 1/Sqrt(e) semitones. bellWidth>0</DL>
</DD>
</DL>
<HR>

<A NAME="calcNoteDiss(java.util.ArrayList, double, int)"><!-- --></A><H3>
calcNoteDiss</H3>
<PRE>
private java.util.ArrayList&lt;java.lang.Double&gt; <B>calcNoteDiss</B>(java.util.ArrayList&lt;<A HREF="../../RationalPiano/ConsonanceCalculation/Rational.html" title="class in RationalPiano.ConsonanceCalculation">Rational</A>&gt;&nbsp;rationals,
                                                           double&nbsp;bellWidth,
                                                           int&nbsp;notecount)</PRE>
<DL>
<DD>For each note in the noterange, calculate the minimum dissonance value which results of bellcurves centered about all the fraction values respectively multiplied with the individual dissonances (numerator * denominator).
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>rationals</CODE> - A list of rational numbers to consider for calculating the individual dissonances. Each rational number denotes a point (x=numerator/denominator, y=numerator*denominator) on the relative frequency / dissonance plane.<DD><CODE>bellWidth</CODE> - The width of a bell curve that each rational number gets "fuzzified" by (on a log scale). bellWidth > 0.<DD><CODE>notecount</CODE> - All single dissonances for the halftone distances from 0 to notecount - 1 get calculated. As the result is symmetrical, only one side gets calculated. notecount > 0.
<DT><B>Returns:</B><DD>A list of dissonances for the different note tuples. Index 0 is unison, index 1 is the dissonance of a base note to one halfstep above, index 2 is the dissonance of a base note to two halfsteps above etc. Yet there is no taking account for volumes.</DL>
</DD>
</DL>
<HR>

<A NAME="calcAllSublists(java.util.ArrayList)"><!-- --></A><H3>
calcAllSublists</H3>
<PRE>
private java.util.ArrayList&lt;<A HREF="../../RationalPiano/ConsonanceCalculation/Rational.html" title="class in RationalPiano.ConsonanceCalculation">Rational</A>&gt; <B>calcAllSublists</B>(java.util.ArrayList&lt;java.util.ArrayList&lt;java.lang.Integer&gt;&gt;&nbsp;factorlist)</PRE>
<DL>
<DD>Calculates all sublists for all factor lists respectively.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>factorlist</CODE> - A list of lists with factors which are individually put in the nominator or denominator.
<DT><B>Returns:</B><DD>A list of fractions which represent all the sublists.</DL>
</DD>
</DL>
<HR>

<A NAME="calcSublists(java.util.ArrayList)"><!-- --></A><H3>
calcSublists</H3>
<PRE>
private java.util.ArrayList&lt;<A HREF="../../RationalPiano/ConsonanceCalculation/Rational.html" title="class in RationalPiano.ConsonanceCalculation">Rational</A>&gt; <B>calcSublists</B>(java.util.ArrayList&lt;java.lang.Integer&gt;&nbsp;intlist)</PRE>
<DL>
<DD>Calculates from a given list of integers all possibilities of putting them on the left or right side of a fraction bar.
 If intlist is empty it will still return 1/1.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>intlist</CODE> - A list of integers which can all be put on either the numerator or the denominator. Size can be of a maximum of 31 elements (Integer.SIZE-1).
<DT><B>Returns:</B><DD>A list of all possible rational numbers.</DL>
</DD>
</DL>
<HR>

<A NAME="calcAllCombinedFactorizations(int)"><!-- --></A><H3>
calcAllCombinedFactorizations</H3>
<PRE>
private java.util.ArrayList&lt;java.util.ArrayList&lt;java.lang.Integer&gt;&gt; <B>calcAllCombinedFactorizations</B>(int&nbsp;upto)</PRE>
<DL>
<DD>Calculates all factorizations from 1 to upto.
 Same primes get multiplied back together, so not {2,2,3,3,5} but {4,9,5}.
 Needs to calculate all prime numbers in the range of [2,upto], does this only once for all integer's factorizations to save unnecessary computation time.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>upto</CODE> - The maximum integer to calculate the factorization for. upto numbers smaller than 1 get replaced by 1.
<DT><B>Returns:</B><DD>A list containing upto lists with the factorizations of the single integers.</DL>
</DD>
</DL>
<HR>

<A NAME="calcCombinedFactorization(int, java.util.ArrayList)"><!-- --></A><H3>
calcCombinedFactorization</H3>
<PRE>
private java.util.ArrayList&lt;java.lang.Integer&gt; <B>calcCombinedFactorization</B>(int&nbsp;num,
                                                                         java.util.ArrayList&lt;java.lang.Integer&gt;&nbsp;primes)</PRE>
<DL>
<DD>Calculates the factorization for the given integer number.
 Same primes get multiplied back together, so not {2,2,3,3,5} but {4,9,5}.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>num</CODE> - The number to calculate the prime factorization for.<DD><CODE>primes</CODE> - The list of primes in the range of [2,num].
<DT><B>Returns:</B><DD>A list with all (same primes back multipled) prime factors of the given number. Returns an empty list if num < 1.</DL>
</DD>
</DL>
<HR>

<A NAME="calcPrimes(int)"><!-- --></A><H3>
calcPrimes</H3>
<PRE>
private java.util.ArrayList&lt;java.lang.Integer&gt; <B>calcPrimes</B>(int&nbsp;upto)</PRE>
<DL>
<DD>Calculates all primes from 2 to upto.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>upto</CODE> - Maximum prime to detect.
<DT><B>Returns:</B><DD>A list of prime numbers. Returns an empty list if upto < 1.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Consonance.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../RationalPiano/ConsonanceCalculation/IConsonance.html" title="interface in RationalPiano.ConsonanceCalculation"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?RationalPiano/ConsonanceCalculation/Consonance.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Consonance.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
